import{j as t}from"./radix-MlM7Hj_h.js";import{c as v,T as N,a as P,b as x,d as m,C as g,e as j,f,g as p}from"./index-BphYzTKe.js";import{e as b,P as T,f as $,B as k,C as B,X as D,Y as _,T as R,g as w,h as C}from"./recharts-DXCKKc23.js";function z(a){const e=v.c(19),{counts:h,loading:i,error:r}=a;let l,s,n,o,c;if(e[0]!==h||e[1]!==r||e[2]!==i){const d=h.map(L),y=K;l="space-y-6",e[8]!==r?(s=r&&t.jsxs("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-4",children:["Failed to load data: ",r.message]}),e[8]=r,e[9]=s):s=e[9],e[10]!==r||e[11]!==i?(n=i&&!r&&t.jsx("div",{className:"text-sm text-muted-foreground rounded-md p-4 bg-background/50",children:"Loading category distribution…"}),e[10]=r,e[11]=i,e[12]=n):n=e[12],o=!i&&!r&&d.length===0&&t.jsx("div",{className:"text-sm text-muted-foreground rounded-md p-4 bg-background/50",children:"No category data."}),c=!i&&!r&&d.length>0&&t.jsxs(N,{defaultValue:"pie",className:"w-full",children:[t.jsxs(P,{className:"grid w-full grid-cols-2",children:[t.jsx(x,{value:"pie",children:"Pie Chart"}),t.jsx(x,{value:"bar",children:"Bar Chart"})]}),t.jsx(m,{value:"pie",children:t.jsxs(g,{children:[t.jsx(j,{children:t.jsx(f,{children:"Category Distribution - Pie Chart (from full database)"})}),t.jsx(p,{className:"h-124",children:t.jsx(b,{width:"100%",height:"100%",children:t.jsx(T,{children:t.jsx($,{data:d,cx:"50%",cy:"50%",labelLine:!1,label:F,outerRadius:200,fill:"#8884d8",dataKey:"count",children:d.map(E)})})})})]})}),t.jsx(m,{value:"bar",children:t.jsxs(g,{children:[t.jsx(j,{children:t.jsx(f,{children:"Category Distribution - Bar Chart (from full database)"})}),t.jsx(p,{className:"h-124",children:t.jsx(b,{width:"100%",height:"100%",children:t.jsxs(k,{data:d,children:[t.jsx(B,{strokeDasharray:"3 3"}),t.jsx(D,{dataKey:"category",angle:-45,textAnchor:"end",height:80,tickMargin:6,interval:"preserveStartEnd",tick:{fontSize:11},tickFormatter:y}),t.jsx(_,{}),t.jsx(R,{}),t.jsx(w,{dataKey:"count",fill:"#8884d8",children:d.map(A)})]})})})]})})]}),e[0]=h,e[1]=r,e[2]=i,e[3]=l,e[4]=s,e[5]=n,e[6]=o,e[7]=c}else l=e[3],s=e[4],n=e[5],o=e[6],c=e[7];let u;return e[13]!==l||e[14]!==s||e[15]!==n||e[16]!==o||e[17]!==c?(u=t.jsxs("div",{className:l,children:[s,n,o,c]}),e[13]=l,e[14]=s,e[15]=n,e[16]=o,e[17]=c,e[18]=u):u=e[18],u}function A(a,e){return t.jsx(C,{fill:a.color},`cell-${e}`)}function E(a,e){return t.jsx(C,{fill:a.color},`cell-${e}`)}function F(a){const{percent:e,payload:h}=a,r=h?.category??"",s=((typeof e=="number"?e:0)*100).toFixed(0);return`${r} (${s}%)`}function K(a){return a?.length>14?`${a.slice(0,14)}…`:a}function L(a,e){return{category:a.category,count:a.count,color:`hsl(${e*60%360}, 70%, 50%)`}}export{z as CategoryDistribution};
